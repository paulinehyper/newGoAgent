<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>에이전트 보안 점검</title>
</head>
<body>
  <h1>📡 서버 제어 패널</h1>
  <button onclick="sendCommand('cpu')">CPU 사용량</button>
  <button onclick="sendCommand('snmp-check')">SNMP 점검</button>
  <button onclick="sendCommand('ftp-check')">FTP 점검</button>

  <p id="status">🕐 대기 중...</p>

  <script>
    function sendCommand(cmd) {
      document.getElementById("status").textContent = `[${cmd}] 명령 전송 중...`;
      fetch(`/send-command/${cmd}`)
        .then(() => setTimeout(fetchResult, 4000));
    }

    function fetchResult() {
      fetch('/latest-result')
        .then(res => res.json())
        .then(data => {
          const result = data.result || data.cpu_usage || "⏳ 결과 없음";
          document.getElementById("status").textContent = `📥 결과: ${result}`;
        });
    }
  </script>
</body>
</html>
